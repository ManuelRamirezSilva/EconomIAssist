# Configuración de Servidores MCP para EconomIAssist
# Este archivo define los servidores MCP disponibles y su configuración

servers:
  # Servidor Tavily - Búsqueda Web
  tavily:
    name: "tavily"
    description: "Servidor MCP para búsqueda web usando Tavily API"
    command: ["npx", "-y", "@modelcontextprotocol/server-tavily"]
    auto_connect: true
    priority: 1
    capabilities:
      - "web_search"
      - "news_search"
      - "real_time_data"
    environment:
      TAVILY_API_KEY: "${TAVILY_API_KEY}"
    tools:
      - search
      - news_search
    resources: []
    
  # Servidor Simple Finance - Datos Financieros Locales
  simple_finance:
    name: "simple_finance"
    description: "Servidor MCP local para datos financieros y transacciones"
    command: ["python", "src/mcp_servers/simple_finance.py"]
    auto_connect: true
    priority: 2
    capabilities:
      - "finance_data"
      - "transactions"
      - "currency_exchange"
    environment: {}
    tools:
      - get_exchange_rate
      - add_transaction
      - get_transactions
      - get_balance
    resources:
      - "file:///transactions.json"
      - "file:///accounts.json"

  # Servidor Weather (opcional)
  weather:
    name: "weather"
    description: "Servidor MCP para información meteorológica"
    command: ["npx", "-y", "@modelcontextprotocol/server-weather"]
    auto_connect: false
    priority: 3
    capabilities:
      - "weather_data"
      - "forecasts"
    environment:
      WEATHER_API_KEY: "${WEATHER_API_KEY}"
    tools:
      - get_weather
      - get_forecast
    resources: []

  # Servidor Google Calendar
  google_calendar:
    name: "google_calendar"
    description: "Servidor MCP para Google Calendar API - gestión completa de calendarios con OAuth Web Flow"
    command: ["node", "src/mcp_servers/google_calendar_web.js"]
    auto_connect: true
    priority: 4
    capabilities:
      - "calendar_management"
      - "event_scheduling"
      - "calendar_integration"
      - "meeting_management"
    environment:
      GOOGLE_OAUTH_PORT: "3000"
      GOOGLE_REDIRECT_URI: "http://localhost:3000/oauth2callback"
    tools:
      - list_calendars
      - list_events
      - create_event
      - update_event
      - delete_event
      - get_event
      - find_available_slots
      - get_upcoming_events
    resources: []

# Configuración global de MCP
settings:
  protocol_version: "2024-11-05"
  client_info:
    name: "EconomIAssist"
    version: "1.0.0"
  connection_timeout: 30
  retry_attempts: 3
  log_level: "INFO"

# Mapeo de capacidades a casos de uso
capability_mapping:
  web_search:
    use_cases:
      - "búsqueda de tasas de cambio actuales"
      - "noticias financieras"
      - "información económica en tiempo real"
    preferred_server: "tavily"
    
  finance_data:
    use_cases:
      - "gestión de transacciones personales"
      - "cálculo de balances"
      - "conversiones de moneda"
    preferred_server: "simple_finance"
    
  weather_data:
    use_cases:
      - "pronóstico del tiempo"
      - "condiciones climáticas"
    preferred_server: "weather"
    
  calendar_management:
    use_cases:
      - "agendar eventos"
      - "consultar calendario"
      - "recordatorios"
      - "gestión de reuniones"
      - "encontrar horarios disponibles"
      - "programar citas"
    preferred_server: "google_calendar"