# Configuración de Servidores MCP para EconomIAssist
# Este archivo define los servidores MCP disponibles y su configuración

servers:
  # Servidor Tavily - Búsqueda Web
  tavily:
    name: "tavily"
    description: "Servidor MCP para búsqueda web usando Tavily API"
    command: ["npx", "tavily-mcp"]
    auto_connect: true
    priority: 1
    capabilities:
      - "web_search"
      - "news_search"
      - "real_time_data"
    environment:
      TAVILY_API_KEY: "${TAVILY_API_KEY}"
    tools:
      - search
      - news_search
    resources: []
    
  # Servidor KnowledgeBase - Memoria del Usuario (MCP Puro)
  knowledge_base:
    name: "knowledge_base"
    description: "Servidor MCP para memoria conversacional usando KnowledgeBase Server"
    command: ["docker", "run", "--interactive", "--rm", "--volume", "knowledgebase:/db", "mbcrawfo/knowledge-base-server"]
    auto_connect: true
    priority: 2
    capabilities:
      - "user_memory"
      - "conversation_history"
      - "context_storage"
      - "memory_search"
    environment:
      DATABASE_NAME: "user_memory.sqlite"
    tools: []  # Se auto-descubren dinámicamente
    resources: []

  # # Servidor Weather (opcional)
  # weather:
  #   name: "weather"
  #   description: "Servidor MCP para información meteorológica"
  #   command: ["npx", "-y", "@modelcontextprotocol/server-weather"]
  #   auto_connect: false
  #   priority: 4
  #   capabilities:
  #     - "weather_data"
  #     - "forecasts"
  #   environment:
  #     WEATHER_API_KEY: "${WEATHER_API_KEY}"
  #   tools:
  #     - get_weather
  #     - get_forecast
  #   resources: []


# Configuración global de MCP
settings:
  protocol_version: "2024-11-05"
  client_info:
    name: "EconomIAssist"
    version: "1.0.0"
  connection_timeout: 30
  retry_attempts: 3
  log_level: "INFO"


# Mapeo de capacidades a casos de uso
capability_mapping:
  web_search:
    use_cases:
      - "búsqueda de tasas de cambio actuales"
      - "noticias financieras"
      - "información económica en tiempo real"
    preferred_server: "tavily"
    
  user_memory:
    use_cases:
      - "recordar preferencias del usuario"
      - "almacenar contexto conversacional"
      - "recuperar interacciones pasadas"
      - "personalizar respuestas financieras"
    preferred_server: "knowledge_base"
    
  # finance_data:
  #   use_cases:
  #     - "gestión de transacciones personales"
  #     - "cálculo de balances"
  #     - "conversiones de moneda"
  #   preferred_server: "simple_finance"
    
  # weather_data:
  #   use_cases:
  #     - "pronóstico del tiempo"
  #     - "condiciones climáticas"
  #   preferred_server: "weather"
    
  # calendar_management:
  #   use_cases:
  #     - "agendar eventos"
  #     - "consultar calendario"
  #     - "recordatorios"
  #   preferred_server: "calendar"